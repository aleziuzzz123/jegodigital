<!DOCTYPE html>
<html>
<head>
    <title>Jegodigital Test Page</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 50px auto; padding: 20px; }
        .btn { background: #4f46e6; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin: 10px; }
        .result { margin: 10px 0; padding: 10px; border-radius: 5px; }
        .success { background: #d4edda; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; border: 1px solid #f5c6cb; }
    </style>
</head>
<body>
    <h1>üß™ Jegodigital Test Page</h1>
    <p>This page is working! Now let's test the functions:</p>
    
    <button class="btn" onclick="testEmail()">Test Email</button>
    <button class="btn" onclick="testWebhook()">Test Webhook</button>
    <button class="btn" onclick="testAccount()">Test Account Creation</button>
    
    <div id="results"></div>

    <script>
        function showResult(message, isSuccess = true) {
            const div = document.createElement('div');
            div.className = `result ${isSuccess ? 'success' : 'error'}`;
            div.innerHTML = `${isSuccess ? '‚úÖ' : '‚ùå'} ${message}`;
            document.getElementById('results').appendChild(div);
        }

        async function testEmail() {
            showResult('Testing email...', true);
            try {
                const response = await fetch('https://jegodigital.com/.netlify/functions/testEmail', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ testType: 'customer' })
                });
                const result = await response.json();
                if (result.success) {
                    showResult(`Email sent: ${result.emailId}`, true);
                } else {
                    showResult(`Email failed: ${result.message}`, false);
                }
            } catch (error) {
                showResult(`Email error: ${error.message}`, false);
            }
        }

        async function testWebhook() {
            showResult('Testing webhook...', true);
            try {
                const response = await fetch('https://jegodigital.com/.netlify/functions/webhook', {
                    method: 'POST',
                    headers: { 
                        'Content-Type': 'application/json',
                        'x-signature': 'test'
                    },
                    body: JSON.stringify({
                        type: 'payment',
                        data: { id: 'test-123', status: 'approved' }
                    })
                });
                const result = await response.json();
                if (result.received) {
                    showResult('Webhook working!', true);
                } else {
                    showResult(`Webhook failed: ${JSON.stringify(result)}`, false);
                }
            } catch (error) {
                showResult(`Webhook error: ${error.message}`, false);
            }
        }

        async function testAccount() {
            showResult('Testing account creation...', true);
            try {
                const response = await fetch('https://jegodigital.com/.netlify/functions/createCustomerAccount', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        customerData: {
                            customer: { email: 'test@example.com', firstName: 'Test', lastName: 'User' },
                            service: { package: 'Test Package' },
                            paymentId: 'test-123'
                        }
                    })
                });
                const result = await response.json();
                if (result.success) {
                    showResult(`Account created: ${result.userId}`, true);
                } else {
                    showResult(`Account failed: ${result.message}`, false);
                }
            } catch (error) {
                showResult(`Account error: ${error.message}`, false);
            }
        }
    </script>
</body>
</html>

